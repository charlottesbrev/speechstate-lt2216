(this.webpackJsonpspeechstate=this.webpackJsonpspeechstate||[]).push([[0],{170:function(e,t,n){},218:function(e,t){},357:function(e,t){},360:function(e,t){},364:function(e,t){},365:function(e,t){},366:function(e,t){},367:function(e,t){},368:function(e,t){},456:function(e,t,n){"use strict";n.r(t);var r=n(166),o=n(51),c=(n(170),n(14),n(159)),a=n(25),i=n(94),s=n(3),u=n(459),l=n(460);function d(e){return Object(s.q)((function(t){return{type:"SPEAK",value:e}}))}var E={Lab:{title:"Laboration"},"Lecture.":{title:"Dialogue systems lecture"},"Exam.":{title:"Exam at the university"},"On Monday.":{day:"Monday"},"On Tuesday.":{day:"Tuesday"},"On Wednesday.":{day:"Wednesday"},"On Thirsday.":{day:"Thirsday"},"On Friday.":{day:"Friday"},"On Saturday.":{day:"Saturday"},"On Sunday.":{day:"Sunday"},"At 8:00":{time:"08:00"},"At 9:00":{time:"09:00"},"At 10":{time:"10:00"},"At 11":{time:"11:00"},"At 12":{time:"12:00"},"At 13":{time:"13:00"},"At 14":{time:"14:00"},"At 15":{time:"15:00"},"At 16":{time:"16:00"},"Yes.":{acknowledge:"Yes"},"No.":{acknowledge:"No"},"Of course.":{acknowledge:"Yes"},"No way.":{acknowledge:"No"}};function f(e){return"Yes."===e||"Of course."===e}function y(e){return"Create a meeting."===e}function b(e){return e.startsWith("Who is ")&&e.endsWith("?")?e.substring(7,e.length-1):""}var O={initial:"idle",states:{idle:{on:{CLICK:{target:"init",actions:Object(s.b)({threshold:function(e){return.8}})}}},init:{on:{TTS_READY:"login",CLICK:"login"}},unsure_of_login:{initial:"first_question",on:{RECOGNISED:[{target:".yes",cond:function(e){return f(e.recResult[0].utterance)}},{target:".no"}],COMPUTER_RIGHT:{target:"set_login",actions:[Object(s.b)({recResult:function(e){return e.saved}})]},COMPUTER_WRONG:{target:"login",actions:Object(s.b)({recResult:function(e){return e.saved}})},TIMEOUT:".repeat_question"},states:{first_question:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.recResult[0].utterance,"?")}})),on:{ENDSPEECH:{actions:[Object(s.q)("LISTEN"),Object(s.b)({saved:function(e){return e.recResult}})]}}},repeat_question:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.saved[0].utterance,"?")}}))],on:{ENDSPEECH:{actions:Object(s.q)("LISTEN")}}},yes:{entry:Object(s.q)("COMPUTER_RIGHT")},no:{entry:Object(s.q)("COMPUTER_WRONG")}}},login:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"unsure_of_login",cond:function(e){return e.recResult[0].confidence<e.threshold}},{target:"set_login"}],HELPME:"init",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["What is your name?","Please tell me your name.","Tell me your name, for example Mark."]}})],always:"prompt"},helpme:{entry:d("This is some help 1."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}}))],on:{ENDSPEECH:{target:"login_user",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},login_user:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Tell me your name."),on:{ENDSPEECH:"login_user"}}}},set_login:{initial:"setup",on:{JUMP:"ask_whattodo"},states:{setup:{entry:[Object(s.b)({username:function(e){return e.recResult[0].utterance}}),d("")],on:{ENDSPEECH:{actions:Object(s.q)("JUMP")}}}}},unsure_of_ask_whattodo:{initial:"first_question",on:{RECOGNISED:[{target:".yes",cond:function(e){return f(e.recResult[0].utterance)}},{target:".no"}],COMPUTER_RIGHT:[{target:"intro",cond:function(e){return y(e.saved[0].utterance)},actions:[Object(s.b)({recResult:function(e){return e.saved}})]},{target:"check_whois",cond:function(e){return""!==b(e.saved[0].utterance)},actions:[Object(s.b)({name:function(e){return b(e.saved[0].utterance)}}),Object(s.b)({recResult:function(e){return e.saved}})]},{target:"ask_whattodo.nomatch",actions:[Object(s.b)({recResult:function(e){return e.saved}})]}],COMPUTER_WRONG:{target:"ask_whattodo",actions:Object(s.b)({recResult:function(e){return e.saved}})},TIMEOUT:".repeat_question"},states:{first_question:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.recResult[0].utterance,"?")}})),on:{ENDSPEECH:{actions:[Object(s.q)("LISTEN"),Object(s.b)({saved:function(e){return e.recResult}})]}}},repeat_question:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.saved[0].utterance,"?")}}))],on:{ENDSPEECH:{actions:Object(s.q)("LISTEN")}}},yes:{entry:Object(s.q)("COMPUTER_RIGHT")},no:{entry:Object(s.q)("COMPUTER_WRONG")}}},ask_whattodo:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"unsure_of_ask_whattodo",cond:function(e){return e.recResult[0].confidence<e.threshold}},{target:"intro",cond:function(e){return y(e.recResult[0].utterance)}},{target:"check_whois",cond:function(e){return""!==b(e.recResult[0].utterance)},actions:Object(s.b)({name:function(e){return b(e.recResult[0].utterance)}})},{target:".nomatch"}],HELPME:"login",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["Hi, ".concat(e.username,"! What do you want to do?"),"You need to tell me what to do.","You can say for example: Create a meeting."]}})],always:"prompt"},helpme:{entry:d("You can create a meeting, or ask who is X."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}}))],on:{ENDSPEECH:{target:"select_whattodo",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},select_whattodo:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is."),on:{ENDSPEECH:"select_whattodo"}}}},check_whois:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"info_meeting",cond:function(e){return f(e.recResult[0].utterance)},actions:Object(s.b)({title:function(e){return"Meeting with ".concat(e.name)}})},{target:"ask_whattodo",cond:function(e){return"No."===(t=e.recResult[0].utterance)||"No way."===t;var t}},{target:".nomatch"}],HELPME:"ask_whattodo",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".ask_to_meet"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["Do you want to meet them?","Do you want to meet them 2?","Do you want to meet them 3?"]}})],always:"get_result"},helpme:{entry:d("This is some help 9."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},get_result:{invoke:{id:"getPerson",src:function(e,t){return n=e.name,fetch(new Request("https://cors.eu.org/https://api.duckduckgo.com/?q=".concat(n,"&format=json&skip_disambig=1&l=us_en"))).then((function(e){return e.json()}));var n},onDone:{target:"tell_result",actions:Object(s.b)({nameinfo:function(e,t){var n=t.data.Abstract;return""===n&&(n=t.data.RelatedTopics[0].Text),n}})},onError:{target:"nomatch",actions:Object(s.b)({error:function(e,t){return t.data}})}}},tell_result:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"".concat(e.nameinfo,".")}})),on:{ENDSPEECH:"ask_to_meet"}},ask_to_meet:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"select_whattodo",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},select_whattodo:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Say yes or no."),on:{ENDSPEECH:"select_whattodo"}}}},intro:{initial:"prompt",on:{ENDSPEECH:"welcome"},states:{prompt:{entry:d("Let's create a meeting")}}},unsure_of_welcome:{initial:"first_question",on:{RECOGNISED:[{target:".yes",cond:function(e){return f(e.recResult[0].utterance)}},{target:".no"}],COMPUTER_RIGHT:[{target:"info_meeting",cond:function(e){return"title"in(E[e.saved[0].utterance]||{})},actions:[Object(s.b)({recResult:function(e){return e.saved}}),Object(s.b)({title:function(e){return E[e.saved[0].utterance].title}})]},{target:"welcome.nomatch",actions:[Object(s.b)({recResult:function(e){return e.saved}})]}],COMPUTER_WRONG:{target:"welcome",actions:Object(s.b)({recResult:function(e){return e.saved}})},TIMEOUT:".repeat_question"},states:{first_question:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.recResult[0].utterance,"?")}})),on:{ENDSPEECH:{actions:[Object(s.q)("LISTEN"),Object(s.b)({saved:function(e){return e.recResult}})]}}},repeat_question:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.saved[0].utterance,"?")}}))],on:{ENDSPEECH:{actions:Object(s.q)("LISTEN")}}},yes:{entry:Object(s.q)("COMPUTER_RIGHT")},no:{entry:Object(s.q)("COMPUTER_WRONG")}}},welcome:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"unsure_of_welcome",cond:function(e){return e.recResult[0].confidence<e.threshold}},{target:"info_meeting",cond:function(e){return"title"in(E[e.recResult[0].utterance]||{})},actions:Object(s.b)({title:function(e){return E[e.recResult[0].utterance].title}})},{target:".nomatch"}],HELPME:"ask_whattodo",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["What is it about?","What is it about 2?","What is it about 3?"]}})],always:"prompt"},helpme:{entry:d("This is some help 3."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"ask_meeting",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},ask_meeting:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Tell me something I know."),on:{ENDSPEECH:"ask_meeting"}}}},info_meeting:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"OK, ".concat(e.title)}})),on:{ENDSPEECH:"weekday"}},unsure_of_weekday:{initial:"first_question",on:{RECOGNISED:[{target:".yes",cond:function(e){return f(e.recResult[0].utterance)}},{target:".no"}],COMPUTER_RIGHT:[{target:"info_weekday",cond:function(e){return"day"in(E[e.saved[0].utterance]||{})},actions:[Object(s.b)({recResult:function(e){return e.saved}}),Object(s.b)({day:function(e){return E[e.saved[0].utterance].day}})]},{target:"weekday.nomatch",actions:[Object(s.b)({recResult:function(e){return e.saved}})]}],COMPUTER_WRONG:{target:"weekday",actions:Object(s.b)({recResult:function(e){return e.saved}})},TIMEOUT:".repeat_question"},states:{first_question:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.recResult[0].utterance,"?")}})),on:{ENDSPEECH:{actions:[Object(s.q)("LISTEN"),Object(s.b)({saved:function(e){return e.recResult}})]}}},repeat_question:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.saved[0].utterance,"?")}}))],on:{ENDSPEECH:{actions:Object(s.q)("LISTEN")}}},yes:{entry:Object(s.q)("COMPUTER_RIGHT")},no:{entry:Object(s.q)("COMPUTER_WRONG")}}},weekday:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"unsure_of_weekday",cond:function(e){return e.recResult[0].confidence<e.threshold}},{target:"info_weekday",cond:function(e){return"day"in(E[e.recResult[0].utterance]||{})},actions:Object(s.b)({day:function(e){return E[e.recResult[0].utterance].day}})},{target:".nomatch"}],HELPME:"intro",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["On which day is it?","On which day is it 2?","On which day is it 3?"]}})],always:"prompt"},helpme:{entry:d("This is some help 4."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"ask_day",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},ask_day:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Tell me a weekday."),on:{ENDSPEECH:"ask_day"}}}},info_weekday:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"OK, ".concat(e.day)}})),on:{ENDSPEECH:"wholeday"}},wholeday:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"info_wholeday",cond:function(e){return"acknowledge"in(E[e.recResult[0].utterance]||{})},actions:Object(s.b)({acknowledge:function(e){return E[e.recResult[0].utterance].acknowledge}})},{target:".nomatch"}],HELPME:"weekday",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["Will it take the whole day?","Will it take the whole day 2?","Will it take the whole day 3?"]}})],always:"prompt"},helpme:{entry:d("This is some help 5."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"waitfor_yesno",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},waitfor_yesno:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Tell me a yes or a no."),on:{ENDSPEECH:"waitfor_yesno"}}}},info_wholeday:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"OK, ".concat(e.acknowledge)}})),on:{ENDSPEECH:[{target:"meeting_wholeday",cond:function(e){return"Yes"===e.acknowledge}},{target:"timeofday",cond:function(e){return"No"===e.acknowledge}}]}},meeting_wholeday:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"info_meeting_wholeday",cond:function(e){return"acknowledge"in(E[e.recResult[0].utterance]||{})},actions:Object(s.b)({acknowledge:function(e){return E[e.recResult[0].utterance].acknowledge}})},{target:".nomatch"}],HELPME:"wholeday",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["Do you want me to create a meeting titled ".concat(e.title," on ").concat(e.day," for the whole day?"),"Do you want me to create the meeting?","Please let me know if you want to create the meeting?"]}})],always:"prompt"},helpme:{entry:d("This is some help 6."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"waitfor_yesno",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},waitfor_yesno:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Tell me a yes or a no."),on:{ENDSPEECH:"waitfor_yesno"}}}},info_meeting_wholeday:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"OK, ".concat(e.acknowledge)}})),on:{ENDSPEECH:[{target:"done",cond:function(e){return"Yes"===e.acknowledge}},{target:"ask_whattodo",cond:function(e){return"No"===e.acknowledge}}]}},unsure_of_timeofday:{initial:"first_question",on:{RECOGNISED:[{target:".yes",cond:function(e){return f(e.recResult[0].utterance)}},{target:".no"}],COMPUTER_RIGHT:[{target:"info_timeofday",cond:function(e){return"time"in(E[e.saved[0].utterance]||{})},actions:[Object(s.b)({recResult:function(e){return e.saved}}),Object(s.b)({time:function(e){return E[e.saved[0].utterance].time}})]},{target:"timeofday.nomatch",actions:[Object(s.b)({recResult:function(e){return e.saved}})]}],COMPUTER_WRONG:{target:"timeofday",actions:Object(s.b)({recResult:function(e){return e.saved}})},TIMEOUT:".repeat_question"},states:{first_question:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.recResult[0].utterance,"?")}})),on:{ENDSPEECH:{actions:[Object(s.q)("LISTEN"),Object(s.b)({saved:function(e){return e.recResult}})]}}},repeat_question:{entry:[Object(s.q)((function(e){return{type:"SPEAK",value:"Did you say: ".concat(e.saved[0].utterance,"?")}}))],on:{ENDSPEECH:{actions:Object(s.q)("LISTEN")}}},yes:{entry:Object(s.q)("COMPUTER_RIGHT")},no:{entry:Object(s.q)("COMPUTER_WRONG")}}},timeofday:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"unsure_of_timeofday",cond:function(e){return e.recResult[0].confidence<e.threshold}},{target:"info_timeofday",cond:function(e){return"time"in(E[e.recResult[0].utterance]||{})},actions:Object(s.b)({time:function(e){return E[e.recResult[0].utterance].time}})},{target:".nomatch"}],HELPME:"meeting_wholeday",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["What time is your meeting?","What time is your meeting 2?","What time is your meeting 3?"]}})],always:"prompt"},helpme:{entry:d("This is some help 7."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"ask_time",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},ask_time:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what hour that is. Tell me an hour."),on:{ENDSPEECH:"ask_time"}}}},info_timeofday:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"OK, ".concat(e.time)}})),on:{ENDSPEECH:"meeting_time"}},meeting_time:{initial:"reset",on:{RECOGNISED:[{target:".helpme",cond:function(e){return"Help."===e.recResult[0].utterance}},{target:"info_meeting_time",cond:function(e){return"acknowledge"in(E[e.recResult[0].utterance]||{})},actions:Object(s.b)({acknowledge:function(e){return E[e.recResult[0].utterance].acknowledge}})},{target:".nomatch"}],HELPME:"meeting_wholeday",TIMEOUT:[{target:"idle",cond:function(e){return e.sentenceCounter>=e.sentences.length}},{target:".prompt"}]},states:{reset:{entry:[Object(s.b)({sentenceCounter:function(e){return 0}}),Object(s.b)({sentences:function(e){return["Do you want me to create a meeting titled ".concat(e.title," on ").concat(e.day," at ").concat(e.time,"?"),"Do you want the meeting ".concat(e.title," on ").concat(e.day," at ").concat(e.time,"?"),"Please tell if you want to create the meeting?"]}})],always:"prompt"},helpme:{entry:d("This is some help 8."),on:{ENDSPEECH:{actions:Object(s.q)("HELPME")}}},prompt:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:e.sentences[e.sentenceCounter]}})),on:{ENDSPEECH:{target:"waitfor_yesno",actions:Object(s.b)({sentenceCounter:function(e){return e.sentenceCounter+1}})}}},waitfor_yesno:{entry:Object(s.q)("LISTEN")},nomatch:{entry:d("Sorry, I don't know what it is. Tell me a yes or a no."),on:{ENDSPEECH:"waitfor_yesno"}}}},info_meeting_time:{entry:Object(s.q)((function(e){return{type:"SPEAK",value:"OK, ".concat(e.acknowledge)}})),on:{ENDSPEECH:[{target:"done",cond:function(e){return"Yes"===e.acknowledge}},{target:"ask_whattodo",cond:function(e){return"No"===e.acknowledge}}]}},done:{initial:"prompt",states:{prompt:{entry:d("Your meeting has been created"),on:{ENDSPEECH:"stop"}},stop:{type:"final"}}}}},m=n(160),g=n.n(m),h=n(163),p=n.n(h),j=n(12),S=a.a.send,C=a.a.cancel,R="northeurope";Object(l.a)({url:"https://statecharts.io/inspect",iframe:!1});var _=Object(i.a)({id:"root",type:"parallel",states:{dm:Object(o.a)({},O),asrtts:{initial:"init",states:{init:{on:{CLICK:{target:"getToken",actions:[Object(s.b)({audioCtx:function(e){return new(window.AudioContext||window.webkitAudioContext)}}),function(e){return navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioCtx.createMediaStreamSource(t)}))}]}}},getToken:{invoke:{id:"getAuthorizationToken",src:function(e,t){return v()},onDone:{actions:[Object(s.b)((function(e,t){return{azureAuthorizationToken:t.data}})),"ponyfillASR"],target:"ponyfillTTS"},onError:{target:"fail"}}},ponyfillTTS:{invoke:{id:"ponyTTS",src:function(e,t){return function(t,n){var r=p()({audioContext:e.audioCtx,credentials:{region:R,authorizationToken:e.azureAuthorizationToken}}),o=r.speechSynthesis,c=r.SpeechSynthesisUtterance;e.tts=o,e.ttsUtterance=c,e.tts.addEventListener("voiceschanged",(function(){e.tts.cancel();var n=e.tts.getVoices(),r=RegExp("en-US","u");r=RegExp("en-US","u");var o=n.find((function(e){return r.test(e.name)}));o?(e.voice=o,t("TTS_READY")):(console.error("TTS_ERROR: Could not get voice for regexp ".concat(r)),t("TTS_ERROR"))}))}}},on:{TTS_READY:"idle",TTS_ERROR:"fail"}},idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(s.b)((function(e,t){return{ttsAgenda:t.value}}))}}},recognising:{initial:"noinput",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(s.b)((function(e,t){return{recResult:t.value}}))],target:".match"},RECOGNISED:"idle",SELECT:"idle",CLICK:".pause"},states:{noinput:{entry:["recStart",S({type:"TIMEOUT"},{delay:function(e){return 1e3*(e.tdmPassivity||10)},id:"timeout"})],on:{TIMEOUT:"#root.asrtts.idle",STARTSPEECH:"inprogress"},exit:C("timeout")},inprogress:{},match:{entry:S("RECOGNISED")},pause:{entry:"recStop",on:{CLICK:"noinput"}}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle",SELECT:"idle",CLICK:{target:"idle",actions:S("ENDSPEECH")}},exit:"ttsStop"},fail:{}}}}},{actions:{recLogResult:function(e){console.log("U>",e.recResult[0].utterance,e.recResult[0].confidence)},logIntent:function(e){console.log("<< NLU intent: "+e.nluData.intent.name)}}}),w=function(e){var t=((e.state.context.tdmVisualOutputInfo||[{}]).find((function(e){return"name"===e.attribute}))||{}).value,n=((e.state.context.tdmVisualOutputInfo||[{}]).find((function(e){return"image"===e.attribute}))||{}).value,r="circle";switch(!0){case e.state.matches({asrtts:"fail"})||e.state.matches({dm:"fail"}):break;case e.state.matches({asrtts:{recognising:"pause"}}):t="Click to continue";break;case e.state.matches({asrtts:"recognising"}):r="circle-recognising",t=t||"Listening...";break;case e.state.matches({asrtts:"speaking"}):r="circle-speaking",t=t||"Speaking...";break;case e.state.matches({dm:"idle"}):case e.state.matches({dm:"init"}):t="Click to start!",r="circle-click";break;default:t=t||"\xa0"}return Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("figure",{className:"prompt",children:n&&Object(j.jsx)("img",{src:n,alt:t})}),Object(j.jsxs)("div",{className:"status",children:[Object(j.jsx)("button",Object(o.a)({type:"button",className:r,style:{}},e)),Object(j.jsx)("div",{className:"status-text",children:t})]})]})},T=function(e){var t=e.alternative.find((function(e){return"name"===e.attribute})).value,n=(e.alternative.find((function(e){return"image"===e.attribute}))||{}).value;return Object(j.jsxs)("figure",Object(o.a)(Object(o.a)({className:"flex"},e),{},{children:[n&&Object(j.jsx)("img",{src:n,alt:t}),Object(j.jsx)("figcaption",{children:t})]}))};function P(){var e=Object(u.b)(_,{devTools:!0,actions:{changeColour:Object(u.a)((function(e){document.body.style.background=e.recResult[0].utterance})),recStart:Object(u.a)((function(e){e.asr.start()})),recStop:Object(u.a)((function(e){e.asr.abort()})),ttsStart:Object(u.a)((function(e){var t=new e.ttsUtterance(e.ttsAgenda);console.log("S>",e.ttsAgenda),t.voice=e.voice,t.onend=function(){return o("ENDSPEECH")},e.tts.speak(t)})),ttsStop:Object(u.a)((function(e){e.tts.cancel()})),ponyfillASR:Object(u.a)((function(e,t){var n=g()({audioContext:e.audioCtx,credentials:{region:R,authorizationToken:e.azureAuthorizationToken}}).SpeechRecognition;e.asr=new n,e.asr.lang="en-US",e.asr.continuous=!0,e.asr.interimResults=!0,e.asr.onresult=function(e){var t=e.results[0];t.isFinal?o({type:"ASRRESULT",value:[{utterance:t[0].transcript,confidence:t[0].confidence}]}):o({type:"STARTSPEECH"})}}))}}),t=Object(r.a)(e,2),n=t[0],o=t[1],c=(n.context.tdmExpectedAlternatives||[]).filter((function(e){return e.visual_information})).map((function(e,t){return Object(j.jsx)(T,{state:n,alternative:e.visual_information,onClick:function(){return o({type:"SELECT",value:e.semantic_expression})}},t)}));return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(w,{state:n,alternative:{},onClick:function(){return o("CLICK")}}),Object(j.jsx)("div",{className:"select-wrapper",children:Object(j.jsx)("div",{className:"select",children:c})})]})}var v=function(){return fetch(new Request("https://northeurope.api.cognitive.microsoft.com/sts/v1.0/issuetoken",{method:"POST",headers:{"Ocp-Apim-Subscription-Key":"6dbf9445e02f4309ad110935a537bd83"}})).then((function(e){return e.text()}))},N=document.getElementById("root");c.render(Object(j.jsx)(P,{}),N)}},[[456,1,2]]]);
//# sourceMappingURL=main.6f2d32cc.chunk.js.map